<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Gestión de Contratos</title>
</head>

<body>
    <div class="flex flex-row gap-6 h-full">

        <div class="flex flex-col w-3/5 gap-6">
            <div class="glass-panel p-6 rounded-xl shadow-lg flex-shrink-0">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-semibold text-white">Plantillas Existentes</h2>
                    <button onclick="showAddView()" class="btn-login px-4">
                        <i class="fas fa-plus mr-2"></i> Añadir Plantilla
                    </button>
                </div>
            </div>
            <div class="glass-panel rounded-xl shadow-lg flex-grow flex flex-col overflow-hidden">
                <div class="overflow-auto h-full">
                    <table class="min-w-full divide-y divide-gray-700">
                        <thead class="bg-gray-800 bg-opacity-50 sticky top-0">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase">Nombre
                                    Plantilla</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase">Archivo PDF
                                </th>
                                <th class="px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase">Fecha
                                    Subida</th>
                                <th class="px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase">Acciones
                                </th>
                            </tr>
                        </thead>
                        <tbody id="contractsTableBody" class="divide-y divide-gray-700 text-gray-200"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="form-panel-container" class="flex w-2/5">
            <div class="glass-panel p-6 rounded-xl shadow-lg h-full w-full flex flex-col">
                <h2 id="form-title" class="text-2xl font-bold text-white mb-4 flex-shrink-0">Panel de Contratos</h2>

                <div id="form-content-area" class="overflow-y-auto flex-grow pr-2 rounded-lg">
                </div>

                <div id="form-actions"
                    class="pt-4 mt-4 border-t border-gray-700 flex justify-end space-x-3 flex-shrink-0">
                </div>
            </div>
        </div>

    </div>

    <script>
        initContratosView();



        function renderContractsTable(templates) {
            const tableBody = document.getElementById('contractsTableBody');
            tableBody.innerHTML = '';

            templates.forEach(template => {
                const row = tableBody.insertRow();
                row.className = 'hover:bg-gray-700 transition duration-150 ease-in-out cursor-pointer';
                row.onclick = () => showTemplateDetails(template.id);


                let cell = row.insertCell();
                cell.className = 'px-6 py-4 whitespace-nowrap font-medium';
                cell.textContent = template.nombre_contrato;


                cell = row.insertCell();
                cell.className = 'px-6 py-4 whitespace-nowrap';
                cell.textContent = template.nombre_archivo;


                cell = row.insertCell();
                cell.className = 'px-6 py-4 whitespace-nowrap text-center';


                cell.textContent = template.fecha_subida;


                cell = row.insertCell();
                cell.className = 'px-6 py-4 whitespace-nowrap text-right text-sm font-medium';
                cell.innerHTML = `
                    <button onclick="event.stopPropagation(); downloadContract(${template.id})" title="Descargar" class="text-indigo-400 hover:text-indigo-600 mr-3">
                        <i class="fas fa-download"></i>
                    </button>
                    <button onclick="event.stopPropagation(); deleteTemplate(${template.id})" title="Eliminar" class="text-red-400 hover:text-red-600">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
            });
        }
    </script>
</body>

</html>